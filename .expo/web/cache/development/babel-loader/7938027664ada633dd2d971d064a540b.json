{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ParsedText from 'react-native-parsed-text';\nimport Communications from 'react-native-communications';\nimport { StylePropType } from \"./utils\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar WWW_URL_PATTERN = /^www\\./i;\nvar textStyle = {\n  fontSize: 16,\n  lineHeight: 20,\n  marginTop: 5,\n  marginBottom: 5,\n  marginLeft: 10,\n  marginRight: 10\n};\nvar styles = {\n  left: StyleSheet.create({\n    container: {},\n    text: _objectSpread({\n      color: 'black'\n    }, textStyle),\n    link: {\n      color: 'black',\n      textDecorationLine: 'underline'\n    }\n  }),\n  right: StyleSheet.create({\n    container: {},\n    text: _objectSpread({\n      color: 'white'\n    }, textStyle),\n    link: {\n      color: 'white',\n      textDecorationLine: 'underline'\n    }\n  })\n};\nvar DEFAULT_OPTION_TITLES = ['Call', 'Text', 'Cancel'];\nvar MessageText = function (_React$Component) {\n  _inherits(MessageText, _React$Component);\n  var _super = _createSuper(MessageText);\n  function MessageText() {\n    var _this;\n    _classCallCheck(this, MessageText);\n    _this = _super.apply(this, arguments);\n    _this.onUrlPress = function (url) {\n      if (WWW_URL_PATTERN.test(url)) {\n        _this.onUrlPress(\"http://\" + url);\n      } else {\n        Linking.canOpenURL(url).then(function (supported) {\n          if (!supported) {\n            console.error('No handler for URL:', url);\n          } else {\n            Linking.openURL(url);\n          }\n        });\n      }\n    };\n    _this.onPhonePress = function (phone) {\n      var optionTitles = _this.props.optionTitles;\n      var options = optionTitles && optionTitles.length > 0 ? optionTitles.slice(0, 3) : DEFAULT_OPTION_TITLES;\n      var cancelButtonIndex = options.length - 1;\n      _this.context.actionSheet().showActionSheetWithOptions({\n        options: options,\n        cancelButtonIndex: cancelButtonIndex\n      }, function (buttonIndex) {\n        switch (buttonIndex) {\n          case 0:\n            Communications.phonecall(phone, true);\n            break;\n          case 1:\n            Communications.text(phone);\n            break;\n          default:\n            break;\n        }\n      });\n    };\n    _this.onEmailPress = function (email) {\n      return Communications.email([email], null, null, null, null);\n    };\n    return _this;\n  }\n  _createClass(MessageText, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      return !!this.props.currentMessage && !!nextProps.currentMessage && this.props.currentMessage.text !== nextProps.currentMessage.text;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var linkStyle = [styles[this.props.position].link, this.props.linkStyle && this.props.linkStyle[this.props.position]];\n      return _jsx(View, {\n        style: [styles[this.props.position].container, this.props.containerStyle && this.props.containerStyle[this.props.position]],\n        children: _jsx(ParsedText, {\n          style: [styles[this.props.position].text, this.props.textStyle && this.props.textStyle[this.props.position], this.props.customTextStyle],\n          parse: [].concat(_toConsumableArray(this.props.parsePatterns(linkStyle)), [{\n            type: 'url',\n            style: linkStyle,\n            onPress: this.onUrlPress\n          }, {\n            type: 'phone',\n            style: linkStyle,\n            onPress: this.onPhonePress\n          }, {\n            type: 'email',\n            style: linkStyle,\n            onPress: this.onEmailPress\n          }]),\n          childrenProps: _objectSpread({}, this.props.textProps),\n          children: this.props.currentMessage.text\n        })\n      });\n    }\n  }]);\n  return MessageText;\n}(React.Component);\nexport { MessageText as default };\nMessageText.contextTypes = {\n  actionSheet: PropTypes.func\n};\nMessageText.defaultProps = {\n  position: 'left',\n  optionTitles: DEFAULT_OPTION_TITLES,\n  currentMessage: {\n    text: ''\n  },\n  containerStyle: {},\n  textStyle: {},\n  linkStyle: {},\n  customTextStyle: {},\n  textProps: {},\n  parsePatterns: function parsePatterns() {\n    return [];\n  }\n};\nMessageText.propTypes = {\n  position: PropTypes.oneOf(['left', 'right']),\n  optionTitles: PropTypes.arrayOf(PropTypes.string),\n  currentMessage: PropTypes.object,\n  containerStyle: PropTypes.shape({\n    left: StylePropType,\n    right: StylePropType\n  }),\n  textStyle: PropTypes.shape({\n    left: StylePropType,\n    right: StylePropType\n  }),\n  linkStyle: PropTypes.shape({\n    left: StylePropType,\n    right: StylePropType\n  }),\n  parsePatterns: PropTypes.func,\n  textProps: PropTypes.object,\n  customTextStyle: StylePropType\n};","map":{"version":3,"mappings":"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","names":["PropTypes","React","ParsedText","Communications","StylePropType","WWW_URL_PATTERN","textStyle","fontSize","lineHeight","marginTop","marginBottom","marginLeft","marginRight","styles","left","StyleSheet","create","container","text","color","link","textDecorationLine","right","DEFAULT_OPTION_TITLES","MessageText","url","test","onUrlPress","Linking","canOpenURL","then","supported","console","error","openURL","phone","optionTitles","props","options","length","slice","cancelButtonIndex","context","actionSheet","showActionSheetWithOptions","buttonIndex","phonecall","email","nextProps","currentMessage","linkStyle","position","containerStyle","customTextStyle","parsePatterns","type","style","onPress","onPhonePress","onEmailPress","textProps","Component","func","oneOf","arrayOf","string","object","shape"],"sourceRoot":"","sources":["../src/MessageText.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}