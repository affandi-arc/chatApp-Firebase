{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Color from \"./Color\";\nimport { warning, StylePropType } from \"./utils\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    maxWidth: 300\n  },\n  quickReply: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    maxWidth: 200,\n    paddingVertical: 7,\n    paddingHorizontal: 12,\n    minHeight: 50,\n    borderRadius: 13,\n    margin: 3\n  },\n  quickReplyText: {\n    overflow: 'visible'\n  },\n  sendLink: {\n    borderWidth: 0\n  },\n  sendLinkText: {\n    color: Color.defaultBlue,\n    fontWeight: '600',\n    fontSize: 17\n  }\n});\nvar sameReply = function sameReply(currentReply) {\n  return function (reply) {\n    return currentReply.value === reply.value;\n  };\n};\nvar diffReply = function diffReply(currentReply) {\n  return function (reply) {\n    return currentReply.value !== reply.value;\n  };\n};\nvar QuickReplies = function (_Component) {\n  _inherits(QuickReplies, _Component);\n  var _super = _createSuper(QuickReplies);\n  function QuickReplies() {\n    var _this;\n    _classCallCheck(this, QuickReplies);\n    _this = _super.apply(this, arguments);\n    _this.state = {\n      replies: []\n    };\n    _this.handlePress = function (reply) {\n      return function () {\n        var currentMessage = _this.props.currentMessage;\n        var replies = _this.state.replies;\n        if (currentMessage) {\n          var type = currentMessage.quickReplies.type;\n          switch (type) {\n            case 'radio':\n              {\n                _this.handleSend([reply])();\n                return;\n              }\n            case 'checkbox':\n              {\n                if (replies.find(sameReply(reply))) {\n                  _this.setState({\n                    replies: _this.state.replies.filter(diffReply(reply))\n                  });\n                } else {\n                  _this.setState({\n                    replies: [].concat(_toConsumableArray(_this.state.replies), [reply])\n                  });\n                }\n                return;\n              }\n            default:\n              {\n                warning(\"onQuickReply unknown type: \" + type);\n                return;\n              }\n          }\n        }\n      };\n    };\n    _this.handleSend = function (replies) {\n      return function () {\n        var currentMessage = _this.props.currentMessage;\n        if (_this.props.onQuickReply) {\n          _this.props.onQuickReply(replies.map(function (reply) {\n            return _objectSpread(_objectSpread({}, reply), {}, {\n              messageId: currentMessage._id\n            });\n          }));\n        }\n      };\n    };\n    _this.shouldComponentDisplay = function () {\n      var _this$props = _this.props,\n        currentMessage = _this$props.currentMessage,\n        nextMessage = _this$props.nextMessage;\n      var hasReplies = !!currentMessage && !!currentMessage.quickReplies;\n      var hasNext = !!nextMessage && !!nextMessage._id;\n      var keepIt = currentMessage.quickReplies.keepIt;\n      if (hasReplies && !hasNext) {\n        return true;\n      }\n      if (hasReplies && hasNext && keepIt) {\n        return true;\n      }\n      return false;\n    };\n    _this.renderQuickReplySend = function () {\n      var replies = _this.state.replies;\n      var _this$props2 = _this.props,\n        sendText = _this$props2.sendText,\n        customSend = _this$props2.renderQuickReplySend;\n      return _jsx(TouchableOpacity, {\n        style: [styles.quickReply, styles.sendLink],\n        onPress: _this.handleSend(replies),\n        children: customSend ? customSend() : _jsx(Text, {\n          style: styles.sendLinkText,\n          children: sendText\n        })\n      });\n    };\n    return _this;\n  }\n  _createClass(QuickReplies, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props3 = this.props,\n        currentMessage = _this$props3.currentMessage,\n        color = _this$props3.color,\n        quickReplyStyle = _this$props3.quickReplyStyle;\n      var replies = this.state.replies;\n      if (!this.shouldComponentDisplay()) {\n        return null;\n      }\n      var type = currentMessage.quickReplies.type;\n      return _jsxs(View, {\n        style: styles.container,\n        children: [currentMessage.quickReplies.values.map(function (reply, index) {\n          var selected = type === 'checkbox' && replies.find(sameReply(reply));\n          return _jsx(TouchableOpacity, {\n            onPress: _this2.handlePress(reply),\n            style: [styles.quickReply, quickReplyStyle, {\n              borderColor: color\n            }, selected && {\n              backgroundColor: color\n            }],\n            children: _jsx(Text, {\n              numberOfLines: 10,\n              ellipsizeMode: 'tail',\n              style: [styles.quickReplyText, {\n                color: selected ? Color.white : color\n              }],\n              children: reply.title\n            })\n          }, reply.value + \"-\" + index);\n        }), replies.length > 0 && this.renderQuickReplySend()]\n      });\n    }\n  }]);\n  return QuickReplies;\n}(Component);\nexport { QuickReplies as default };\nQuickReplies.defaultProps = {\n  currentMessage: {\n    quickReplies: []\n  },\n  onQuickReply: function onQuickReply() {},\n  color: Color.peterRiver,\n  sendText: 'Send',\n  keepReplies: false,\n  renderQuickReplySend: undefined,\n  quickReplyStyle: undefined\n};\nQuickReplies.propTypes = {\n  currentMessage: PropTypes.object.isRequired,\n  onQuickReply: PropTypes.func,\n  color: PropTypes.string,\n  sendText: PropTypes.string,\n  keepReplies: PropTypes.bool,\n  renderQuickReplySend: PropTypes.func,\n  quickReplyStyle: StylePropType\n};","map":{"version":3,"mappings":"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","names":["PropTypes","React","Component","Color","warning","StylePropType","styles","StyleSheet","create","container","flexDirection","flexWrap","maxWidth","quickReply","justifyContent","alignItems","borderWidth","paddingVertical","paddingHorizontal","minHeight","borderRadius","margin","quickReplyText","overflow","sendLink","sendLinkText","color","defaultBlue","fontWeight","fontSize","sameReply","currentReply","reply","value","diffReply","QuickReplies","replies","currentMessage","props","state","type","quickReplies","handleSend","find","setState","filter","onQuickReply","map","messageId","_id","nextMessage","hasReplies","hasNext","keepIt","sendText","customSend","renderQuickReplySend","quickReplyStyle","shouldComponentDisplay","values","index","selected","handlePress","borderColor","backgroundColor","white","title","length","peterRiver","keepReplies","undefined","object","isRequired","func","string","bool"],"sourceRoot":"","sources":["../src/QuickReplies.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}